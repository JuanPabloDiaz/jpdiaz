---
import type { GitHubIssueComment } from '@utils/github';
import GitHubIcon from '@components/icons/GitHubIcon.astro';
import { Icon } from 'astro-icon/components';

interface Props {
	comment: GitHubIssueComment;
}

const { comment } = Astro.props;
const creationDate = new Date(comment.created_at).toLocaleDateString('en-US', {
	year: 'numeric',
	month: 'long',
	day: 'numeric',
});
---

<article
	class="group relative flex h-full flex-col overflow-hidden rounded-xl bg-white/95 p-5 shadow-lg backdrop-blur-md transition-all duration-300 ease-in-out hover:scale-[1.01] hover:bg-white/80 hover:shadow-xl dark:bg-[rgba(17,24,39,0.9)] dark:hover:bg-[rgba(17,24,39,0.9)]"
>
	<div class="flex items-start">
		<img
			src={comment.user.avatar_url}
			alt={`Avatar of ${comment.user.login}`}
			class="border-gray-100 dark:border-gray-700 mr-4 h-16 w-16 rounded-full border-2 object-cover shadow-md"
			loading="lazy"
		/>
		<div class="flex-1">
			<div class="flex items-center justify-between">
				<h3 class="text-xl font-bold text-black/90 dark:text-white/90">{comment.user.login}</h3>
				<a
					href={comment.html_url}
					target="_blank"
					rel="noopener noreferrer"
					class="bg-blue-100 text-blue-600 hover:bg-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:hover:bg-blue-800/60 inline-flex items-center justify-center rounded-full p-2 transition-colors"
					title="View on GitHub"
				>
					<GitHubIcon class="h-5 w-5" />
				</a>
			</div>
			<p class="text-sm text-black/70 dark:text-white/70">{creationDate}</p>
		</div>
	</div>

	<div class="mt-4 flex-1">
		<div
			class="prose prose-sm max-w-none text-black/80 dark:prose-invert dark:text-white/80"
			set:html={comment.body}
		/>
	</div>

	<div class="mt-auto flex items-center justify-between pt-4">
		<a
			href={comment.user.html_url}
			target="_blank"
			rel="noopener noreferrer"
			class="bg-blue-100 text-blue-600 hover:bg-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:hover:bg-blue-800/60 inline-flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-sm font-medium transition-colors"
		>
			<Icon name="fe:user" class="h-4 w-4" />
			View Profile
		</a>
		<div class="text-sm italic text-black/60 dark:text-white/60">via GitHub</div>
	</div>
</article>
